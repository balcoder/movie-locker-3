(this["webpackJsonpmovie-locker-3"]=this["webpackJsonpmovie-locker-3"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/magnifying-glass.f9737d3e.svg"},30:function(e,t,a){e.exports=a(52)},35:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),s=a.n(c),i=a(10),o=(a(35),a(1)),l=a.n(o),u=a(4),p=a(15),m=a(16),h=a(13),d=a(18),v=a(17),g=a(11),f=a(12),b=a(26),k=a.n(b);var w=function(e){var t=Object(n.useState)(""),a=Object(g.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(""),o=Object(g.a)(i,2),l=o[0],u=o[1],p=Object(n.useState)(!1),m=Object(g.a)(p,2),h=m[0],d=m[1];return Object(n.useEffect)((function(){return function(){d(!1)}})),h?r.a.createElement(f.a,{to:"/"}):r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"/"},"Movie",r.a.createElement("span",null,"Locker"))),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.handleSearch(l),d(!0)},className:"search"},r.a.createElement("input",{type:"text",className:"search__input",placeholder:"Search...",value:l,onChange:function(e){e.preventDefault(),u(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"search__button"},r.a.createElement("img",{src:k.a,className:"search__icon",alt:""}))),r.a.createElement("form",{className:"select-form"},r.a.createElement("select",{className:"select-view",defaultValue:c,onChange:function(t){s(t.target.value),e.handleSelect(t.target.value),d(!0)}},r.a.createElement("option",{value:"In Cinema Now"},"In Cinema"),r.a.createElement("option",{value:"Top Rated"},"Top Rated"),r.a.createElement("option",{value:"Upcoming"},"Upcoming"))))};var y=function(e){var t=e.genreIds.map((function(e,t){return 0===t?r.a.createElement("li",{key:e.id,"data-id":e.id},r.a.createElement(i.c,{exact:!0,to:"/genre/".concat(e.id),activeClassName:"active",className:"genre-link","data-genre-id":e.id},e.name)):r.a.createElement("li",{key:e.id,"data-id":e.id},r.a.createElement(i.c,{exact:!0,to:"/genre/".concat(e.id),className:"genre-link","data-genre-id":e.id},e.name))}));return r.a.createElement("div",{className:"genre-list"},r.a.createElement("ul",null,t))},E=a(29),_=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={popular:[],currentView:[]},n}return Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){void 0!==this.props.params.id&&this.props.params.id!==e.params.id&&this.props.handleUpdateView(this.props.params.id)}},{key:"renderPagelinks",value:function(){for(var e=[],t=1;t<=this.props.numPages;t++)e.push(r.a.createElement("li",{className:parseInt(this.props.currentPage)===t?"li-page-num li-page-num__active":"li-page-num",key:"".concat(t,"-").concat(this.props.currentPage),id:t,onClick:this.props.handleClickPage},r.a.createElement("span",{className:"span-page-num"},t)));return e}},{key:"render",value:function(){var e=this.renderPagelinks(),t=this.props.currentView.filter((function(e){return e.poster_path})).map((function(e){return r.a.createElement("li",{className:"gallery-item",key:e.id},r.a.createElement(i.b,{to:"/movie/".concat(e.id)},r.a.createElement("img",{src:"".concat("http://image.tmdb.org/t/p/w154/").concat(e.poster_path),alt:"".concat(e.title," cover"),className:"gallery-img"}),r.a.createElement("p",{className:"gallery-caption"},e.original_title)))}));return r.a.createElement(E.Zoom,null,r.a.createElement("div",{className:"movie-gallery"},r.a.createElement("ul",{className:"pageLinks"},e),r.a.createElement("ul",{className:"gallery"},t)))}}]),a}(n.Component),j="16c19602a7121938cf7c160b35c37cea";function S(e,t){if(0!==t.length)return t.find((function(t){return t.page===parseInt(e,10)})).results}var O="?api_key=".concat(j,"&language=en-US"),N="http://image.tmdb.org/t/p/";var x=function(e){var t=e.match,a=e.history,c=t.params.id,s=Object(n.useState)([]),i=Object(g.a)(s,2),o=i[0],p=i[1],m=Object(n.useState)(""),h=Object(g.a)(m,2),d=h[0],v=h[1],f=Object(n.useState)(""),b=Object(g.a)(f,2),k=b[0],w=b[1],y=Object(n.useState)(!1),E=Object(g.a)(y,2),_=E[0],j=E[1];Object(n.useEffect)((function(){S(c)}));var S=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("".concat("https://api.themoviedb.org/3/movie/").concat(t).concat(O,"&append_to_response=videos")).then((function(e){return e.json()}));case 4:(a=e.sent).videos.results.length<1?v(""):(n="https://www.youtube.com/watch?v=".concat(a.videos.results[0].key),v(n)),w(k),p(a),j(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"movie-container"},r.a.createElement("div",{className:"movie-container__background",style:o.backdrop_path?{backgroundImage:"url(".concat(N,"w1280").concat(o.backdrop_path,")")}:{backgoundColor:"white"}}),r.a.createElement("div",{className:"movie-container__overlay"}),r.a.createElement("div",{className:"movie-container__content"},r.a.createElement("h1",null,o.title),r.a.createElement("p",null,o.overview),r.a.createElement("div",{className:"movie-mid-section"},r.a.createElement("img",{className:"movie-img",src:o.poster_path?"".concat(N,"w342").concat(o.poster_path):"",alt:"movie poster"}),r.a.createElement("div",{className:"movie-stats"},r.a.createElement("div",null,"Rating: ".concat(o.vote_average)),r.a.createElement("div",null,"Runtime: ".concat(o.runtime)),r.a.createElement("div",null,"Budget: $".concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";try{t=Math.abs(t),t=isNaN(t)?2:t;var r=e<0?"-":"",c=parseInt(e=Math.abs(Number(e)||0).toFixed(t)).toString(),s=c.length>3?c.length%3:0;return r+(s?c.substr(0,s)+n:"")+c.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?a+Math.abs(e-c).toFixed(t).slice(2):"")}catch(i){console.log(i)}}(o.budget))))),r.a.createElement("div",{className:"movie-buttons"},r.a.createElement("button",{className:"btn",onClick:a.goBack},"Go Back"),d&&r.a.createElement("button",{className:"btn"},r.a.createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer"},"Trailer")))))};var P=function(e){return r.a.createElement("div",{className:"content"},r.a.createElement(y,e),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",render:function(t){var a=t.match;return r.a.createElement(_,Object.assign({},a,e))}}),r.a.createElement(f.b,{path:"/genre/:id",render:function(t){var a=t.match;return r.a.createElement(_,Object.assign({},a,e))}}),r.a.createElement(f.b,{path:"/movie/:id",render:function(e){return r.a.createElement(x,Object.assign({},e,{props:!0}))}})))},V=(new Date).getFullYear();var U=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer-logo"},r.a.createElement("img",{src:"https://www.themoviedb.org/assets/2/v4/logos/primary-green-d70eebe18a5eb5b166d5c1ef0796715b8d1a2cbc698f96d311d62f894ae87085.svg",alt:"The Movie Database (TMDb)",width:"81",height:"72"}),r.a.createElement("div",{className:"tmdb-copyright"},"This product uses the TMDb API but is not endorsed or certified by TMDb")),r.a.createElement("div",{className:"copyright"},"Created by Des Barrett \xa9 ",V,". All Rights Reserved."))},I="https://api.themoviedb.org/3/",C="".concat(I,"genre/movie/list?api_key=").concat(j,"&language=en-US&include_adult=false&page=1"),M="".concat(I,"discover/movie?api_key=").concat(j,"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page="),D="".concat(I,"discover/movie?api_key=").concat(j,"&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=false&page="),R=("".concat(I,"discover/movie?api_key=").concat(j,"&language=en-US&region=US&release_date.gte=2020-02-19&release_date.lte=2020-03-19&with_release_type=3|2;"),"".concat(I,"movie/top_rated?api_key=").concat(j,"&language=en-US&page=1")),L="".concat(I,"search/movie?api_key=").concat(j,"&language=en-US&include_adult=false"),T="".concat(I,"discover/movie?api_key=").concat(j,"&language=en-US&region=US&release_date.gte=2020-02-19&release_date.lte=2020-03-19&with_release_type=3|2;"),B="".concat(I,"movie/upcoming?api_key=").concat(j);function G(e){if(!e.ok){if(e.status>=400&&e.status<500)return e.json().then((function(e){throw{errorMessage:e.message}}));throw{errorMessage:"Please try later: Server problem"}}return e.json()}function W(){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(C).then((function(e){return G(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return $.apply(this,arguments)}function $(){return($=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,fetch("".concat(M,"1&with_genres=").concat(t)).then((function(e){return G(e)}));case 3:for(n=e.sent,r=n.total_pages,c=r<10?r:10,s=1;s<=c;s++)a.push(fetch("".concat(M).concat(s,"&with_genres=").concat(t)).then((function(e){return G(e)})));return e.abrupt("return",Promise.all(a));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return J.apply(this,arguments)}function J(){return(J=Object(u.a)(l.a.mark((function e(){var t,a,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch(D+1).then((function(e){return G(e)}));case 3:for(a=e.sent,n=a.total_pages,r=n<10?n:10,c=1;c<=r;c++)t.push(fetch(D+c).then((function(e){return G(e)})));return e.abrupt("return",Promise.all(t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,fetch("".concat(L,"&page=1&query=").concat(t)).then((function(e){return G(e)}));case 3:for(n=e.sent,r=n.total_pages,c=r<10?r:10,s=1;s<=c;s++)a.push(fetch("".concat(L,"&page=").concat(s,"&query=").concat(t)).then((function(e){return G(e)})));return e.abrupt("return",Promise.all(a));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return H.apply(this,arguments)}function H(){return(H=Object(u.a)(l.a.mark((function e(t){var a,n,r,c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="",e.t0=t,e.next="Top Rated"===e.t0?4:"In Cinema Now"===e.t0?6:"Upcoming"===e.t0?8:10;break;case 4:return a=R,e.abrupt("break",11);case 6:return a=T,e.abrupt("break",11);case 8:return a=B,e.abrupt("break",11);case 10:a=R;case 11:return n=[],e.next=14,fetch(a).then((function(e){return G(e)}));case 14:for(r=e.sent,c=r.total_pages,s=c<10?c:10,i=1;i<=s;i++)n.push(fetch("".concat(a,"&page=").concat(i)).then((function(e){return G(e)})));return e.abrupt("return",Promise.all(n));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(51);var K=function(e){Object(d.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={currentViewList:[],currentView:[],genreIds:[],currentPage:1,numPages:1,selected:null},n.loadPopular(),n.loadGenreIds(),n.handleClickPage=n.handleClickPage.bind(Object(h.a)(n)),n.handleUpdateView=n.handleUpdateView.bind(Object(h.a)(n)),n.handleSearch=n.handleSearch.bind(Object(h.a)(n)),n.handleSelect=n.handleSelect.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"loadPopular",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q();case 3:t=e.sent,a=t.length,n=S(this.state.currentPage,t),this.setState({currentView:n,currentViewList:t,numPages:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadGenreIds",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,this.setState({genreIds:t.genres}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadGenresWithIds",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(t);case 3:a=e.sent,n=a.length,1,r=S(1,a),this.setState({currentView:r,currentViewList:a,numPages:n,currentPage:1}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadSearchResults",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y(t);case 3:a=e.sent,n=a.length,r=a[0].results,this.setState({currentViewList:a,currentView:r,numPages:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"loadSelected",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:a=e.sent,n=a.length,r=a[0].results,this.setState({currentViewList:a,currentView:r,numPages:n});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleClickPage",value:function(e){var t=e.target.id,a=S(t,this.state.currentViewList);this.setState({currentPage:parseInt(t,10),currentView:a})}},{key:"handleUpdateView",value:function(e){this.loadGenresWithIds(e)}},{key:"handleSearch",value:function(e){this.loadSearchResults(e)}},{key:"handleSelect",value:function(e){this.loadSelected(e),this.setState({currentPage:1})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,{handleSearch:this.handleSearch,handleSelect:this.handleSelect,handleReload:this.loadPopular}),r.a.createElement(P,{popular:this.state.currentViewList,currentView:this.state.currentView,genreIds:this.state.genreIds,numPages:this.state.numPages,currentPage:this.state.currentPage,handleClickPage:this.handleClickPage,handleUpdateView:this.handleUpdateView}),r.a.createElement(U,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null,r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.e3d15fe5.chunk.js.map